<%= form_for @client, :html => { :class => 'form-horizontal', :multipart => true } do |f| %>
  <% @client.errors.each do |attr, msg| %>
    <div class="alert alert-error">
        <button type="button" class="close" data-dismiss="alert">Ã—</button>
        <%= "#{attr} #{msg}" if @client.errors[attr].first == msg %>
    </div>
  <%end%>
  <div class="control-group">
    <%= f.label :first_name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :first_name, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :last_name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :last_name, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :email, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :email, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :phone, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :phone, :class => 'text_field phone span2' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :dob, :class => 'control-label' %>
    <div class="controls">
      <%= f.date_select :dob, :id => "datepicker", :class => 'input-small', :default => 30.years.ago, :start_year => Time.now.year - 90, :end_year => Time.now.year - 10 %>
    </div>
  </div>
  
  <div class="control-group">
    <div class="controls">
      <div class="btn">
        <%= link_to_function 'Upload Profile Picture', "$('#upload').show(); $('#url').hide();", :rel => 'tooltip', :title => "Upload client's profile picture" %>
      </div>
      |
      <div class="btn">
        <%= link_to_function 'Profile Picture URL', "$('#upload').hide(); $('#url').show();", :rel => 'tooltip', :title => "Specify the URL of client's profile picture" %>
      </div>
      <%- unless @client.image.blank? %>
        <p>
          <%= image_tag @client.image_url(:thumb).to_s %>
        </p>
      <% end %>
        <div id="upload" style="display:none">
          <%= f.file_field :image, :input_html => {:value => @client.image_url.to_s} %>
        </div>
        <div id="url" style= "display:none" >
          <%= f.label :remote_image_url, "Image URL:" %>
          <%= f.text_field :remote_image_url %>
        </div>
    </div>
  </div>

  <%- unless current_user.trainer.blank? %>
    <%= f.hidden_field :trainer_id, :value => current_user.trainer.id %>
  <%end%>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <a class='btn' href= "<%= url_for(:back) %>">
      Cancel
    </a>
  </div>
<% end %>

<script>
  $(".phone").mask("(999) 999-9999");
</script>